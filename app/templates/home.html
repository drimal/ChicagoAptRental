<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Home: Machine Learning App with Flask</title>
<!--

Template 2088 Big City

http://www.tooplate.com/view/2088-big-city

-->
    <!-- load stylesheets -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
    <!-- Google web font "Open Sans" -->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/bootstrap.min.css')}}">
    <!-- Bootstrap style -->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/hero-slider-style.css')}}">
    <!-- Hero slider style (https://codyhouse.co/gem/hero-slider/) -->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/magnific-popup.css')}}">
    <!-- Magnific popup style (http://dimsemenov.com/plugins/magnific-popup/) -->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/tooplate-style.css')}}">
    <!-- Tooplate style -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
          <![endif]-->
</head>
    <body>
        <div class="cd-bg-video-wrapper" data-video="{{ url_for('static', filename='chicago-movie')}}">
            <!-- video element will be loaded using jQuery -->
        </div> <!-- .cd-bg-video-wrapper -->

        <!-- Content -->
        <div class="cd-hero">

            <!-- Navigation -->
            <div class="cd-slider-nav">
                <div class="container">
                    <nav class="navbar">
                        <div class="tm-navbar-bg">
                            <a class="navbar-brand text-uppercase" href="#">Rental Price Predictor</a>
                            <button class="navbar-toggler hidden-lg-up" type="button" data-toggle="collapse" data-target="#tmNavbar">
                                &#9776;
                            </button>
                            <div class="collapse navbar-toggleable-md text-xs-center text-uppercase tm-navbar" id="tmNavbar">
                                <ul class="nav navbar-nav">
                                    <li class="nav-item active selected">
                                        <a class="nav-link" href="#0" data-no="1">Home <span class="sr-only">(current)</span></a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#0" data-no="2">About</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#0" data-no="3">Contact</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>

            <ul class="cd-hero-slider">  <!-- autoplay -->

                <!-- Page 1 Home -->
                <li class="selected">
                    <div class="cd-full-width">
                        <div class="container js-tm-page-content tm-page-1 tm-section-margin-t-small" data-page-no="1">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="tm-home-container-outer">
                                        <div class="tm-home-container">
                                            <div class="tm-home-title-container">
                                                <h2 class="tm-text-title text-xs-center tm-home-title">Welcome to the Windy City Apartment Rental Price Predictor </h2>
                                            </div>
                                            <div class="tm-home-description-container tm-bg-dark-blue">
                                                <div class="text-xs-left tm-textbox">
                                                    <p class="tm-text tm-home-description"> This app is
                                                    designed to predict apartment rental price in
                                                    the City of Chicago. The
                                                    model takes the number of
                                                    beds, baths and the
                                                    neighborhood as input
                                                    and outputs the predicted
                                                    rental price in the USD.
                                                    For the demonstration, please
                                                    make your selection:
                                                      <h2> Choose your selections </h2>
                                                      <div class="container">
                                                          <form action="/result" method="POST">
                                                          <label for="beds"> <font color=#ff9900>Beds </font> </label>
                                                          <select id="beds" name="beds">
                                                            <option value="0">Studio</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>
                                                          </select>
                                                          <br>
                                                          <label for="baths"> <font color=ff9900>Baths </font> </label>
                                                          <select id="baths" name="baths">
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>
                                                          </select>
                                                          <br>
                                                          <label for="neighbourhood">
                                                            <font color=#ff9900>Neighbourhood </font></label>
                                                          <select id="neighbourhood" name="neighbourhood">
                                                            <option value="0">ANDERSONVILLE</option>
                                                            <option value="1">ARCHER HEIGHTS,WEST ELSDON </option>
                                                            <option value="2">ARMOUR SQUARE,CHINATOWN</option>
                                                            <option value="3">AUBURN GRESHAM</option>
                                                            <option value="4">AUSTIN</option>
                                                            <option value="5">BACK OF THE YARDS</option>
                                                            <option value="6">BELMONT CRAIGIN</option>
                                                            <option value="7">HERMOSA</option>
                                                            <option value="8">BRIDGEPORT</option>
                                                            <option value="9">BRIGHTON PARK,MCKINLEY PARK</option>
                                                            <option value="10">BRONZEVILLE</option>
                                                            <option value="11">BUCKTOWN</option>
                                                            <option value="12">CHATHAM,BURNSIDE </option>
                                                            <option value="13">DUNNING</option>
                                                            <option value="14">EDGEWATER</option>
                                                            <option value="15">EDISON PARK</option>
                                                            <option value="16">ENGLEWOOD</option>
                                                            <option value="17">GARFIELD PARK</option>
                                                            <option value="18">GOLD COAST</option>
                                                            <option value="19">GRANT PARK</option>
                                                            <option value="20">GREEKTOWN</option>
                                                            <option value="21">HUMBOLDT PARK</option>
                                                            <option value="22">HYDE PARK</option>
                                                            <option value="23">IRVING PARK,AVONDALE</option>
                                                            <option value="24">JACKSON PARK</option>
                                                            <option value="25">JEFFERSON PARK</option>
                                                            <option value="26">KENWOOD,OAKLAND</option>
                                                            <option value="27">LAKE VIEW</option>
                                                            <option value="28">LINCOLN PARK</option>
                                                            <option value="29">LINCOLN SQUARE</option>
                                                            <option value="30">LITTLE ITALY, UIC</option>
                                                            <option value="31">LITTLE VILLAGE</option>
                                                            <option value="32">LOGAN SQUARE</option>
                                                            <option value="33">LOOP</option>
                                                            <option value="34">LOWER WEST SIDE</option>
                                                            <option value="35">LOWER WEST SIDE</option>
                                                            <option value="36">MIDWAY AIRPORT</option>
                                                            <option value="37">MONTCLARE, GALEWOOD</option>
                                                            <option value="38">MOUNT GREENWOOD,MORGAN PARK</option>
                                                            <option value="39">NEAR SOUTH SIDE</option>
                                                            <option value="40">NORTH CENTER</option>
                                                            <option value="41">NORTH LAWNDALE</option>
                                                            <option value="42">NORTH PARK,ALBANY PARK</option>
                                                            <option value="43">NORWOOD PARK</option>
                                                            <option value="44">OAKLAND,KENWOOD</option>
                                                            <option value="45">OLD TOWN</option>
                                                            <option value="46">PORTAGE PARK</option>
                                                            <option value="47">PRINTERS ROW</option>
                                                            <option value="48">RIVER NORTH</option>
                                                            <option value="49">RIVERDALE</option>
                                                            <option value="50">ROGERS PARK</option>
                                                            <option value="51">RUSH & DIVISION</option>
                                                            <option value="52">SAUGANASH,FOREST GLEN</option>
                                                            <option value="53">SHEFFIELD & DEPAUL</option>
                                                            <option value="54">SOUTH CHICAGO</option>
                                                            <option value="55">SOUTH SHORE, GRAND CROSSING</option>
                                                            <option value="56">SOUTHEAST SIDE</option>
                                                            <option value="57">STREETERVILLE</option>
                                                            <option value="58">UKRAINIAN VILLAGE AND EAST VILLAGE</option>
                                                            <option value="59">UNITED CENTER</option>
                                                            <option value="60">UPTOWN</option>
                                                            <option value="61">WASHINGTON HEIGHTS,ROSELAND</option>
                                                            <option value="62">WASHINGTON PARK</option>
                                                            <option value="63">WEST LOOP</option>
                                                            <option value="64">WEST RIDGE</option>
                                                            <option value="65">WICKER PARK,WEST TOWN</option>
                                                            <option value="66">WOODLAWN</option>
                                                            <option value="67">WRIGLEYVILLE</option>
                                                          </select>
                                                        <br>
                                                        <input type="submit"
                                                        class="tm-submit-btn"  value="Submit">
                                                      </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tm-home-container-bg"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> <!-- .cd-full-width -->
                </li>

                <!-- Page 2 About -->
                <li>
                    <div class="cd-full-width">
                        <div class="container js-tm-page-content tm-section-margin-t" data-page-no="2">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="tm-flex">
                                        <div class="col-lg-6 tm-white-header-container-outer tm-margin-b tm-2-col-left">
                                            <div class="tm-bg-white tm-white-header-container">
                                                <h2 class="tm-text-title tm-text-title-small">Data </h2>
                                            </div>
                                            <div class="tm-bg-dark-blue text-xs-left tm-textbox tm-textbox-padding tm-white-header-body tm-white-border tm-2-col-equal-height">
                                                <p class="tm-text">The data for this project was obtained by scraping 5k listings from <a href="https://chicago.craigslist.org/d/apts-housing-for-rent/search/apa"> Chicago Craigslist </a> using scrapy. I cleaned the scraped web data and did some exploratory analysis to identify important features. I then trained common tree-based regression models namely decision tree, random forest, and the gradient boosting regressor with the training set. </p>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 tm-white-header-container-outer tm-margin-b tm-2-col-right">
                                            <div class="tm-bg-white tm-white-header-container">
                                                <h2 class="tm-text-title tm-text-title-small">Models</h2>
                                            </div>
                                            <div class="tm-bg-dark-blue text-xs-left tm-textbox tm-textbox-padding tm-white-header-body tm-white-border tm-2-col-equal-height">
                                                <p class="tm-text"> The bottom left plot compares the coefficient of determination (R<sup>2</sup>) for different regressor models. R<sup>2</sup> is the measure of how close the predicted prices are to the actual ones. The closer it is to 1, the better the model represents the actual price. R<sup>2</sup> has limitations and does not tell us whether the model predictions are biased. For additional information please refer to my <a href="https://github.com/drimal/ChicagoAptRental">Jupyter notebook on Github</a></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="tm-flex">
                                        <div class="col-lg-6 tm-margin-b tm-2-col-left">
                                            <div class="tm-bg-brown tm-textbox-padding tm-height-100">
                                                <h2 class="tm-text-title tm-text-title-small tm-header-margin-b">Model Performance</h2>
                                                <p class="tm-text">
                                                    <img src="./static/compare.png" , alt=" Results: Real vs Predicted Price", height="280" width="450">
                                                    The gradient boosting regressor has slightly better performance than the other two.
                                            </div>
                                        </div>
                                        <div class="col-lg-6 tm-margin-b tm-2-col-right">
                                            <div class="tm-bg-brown tm-textbox-padding tm-height-100">
                                                <h2 class="tm-text-title tm-text-title-small tm-header-margin-b">Result</h2>
                                                <p class="tm-text">
                                                    The final parameter tuned model is the gradient boosting regressor and has an R<sup>2</sup> of 0.8 on the validation dataset.
                                                    <img src="./static/result.png" , alt=" Results: Real vs Predicted Price">
                                                 </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> <!-- .cd-full-width -->

                </li>

                <!-- Page 3 Contact -->
                <li>
                    <div class="cd-full-width">
                        <div class="container js-tm-page-content tm-section-margin-t-small" data-page-no="3">
                            <div class="tm-contact-page">
                                <div class="row tm-margin-b">
                                    <div class="col-xs-12">
                                        <div class="tm-bg-white tm-textbox-padding">
                                            <h2 class="tm-text-title tm-margin-b-0">Contact Me</h2>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="tm-flex tm-contact-container tm-bg-dark-blue">
                                            <div class="text-xs-left tm-textbox tm-2-col-textbox-2 tm-textbox-padding tm-textbox-padding-contact">
                                                <p class="tm-text">Dipak Rimal
                                                    <br>Email: dipak@dipakrimal.com <br>Naperville, IL, 60563
                                                    <br>Tel: 01-630-873-0247
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> <!-- .cd-full-width -->
                </li>
            </ul> <!-- .cd-hero-slider -->

            <footer class="tm-footer">
                <p class="tm-copyright-text pull-xs-right">Copyright &copy; <span class="tm-current-year">2019</span> Dipak Rimal
                | Design: Tooplate</p>
            </footer>
        </div> <!-- .cd-hero -->

        <!-- Preloader, https://ihatetomatoes.net/create-custom-preloading-screen/ -->
        <div id="loader-wrapper">
            <div id="loader"></div>
            <div class="loader-section section-left"></div>
            <div class="loader-section section-right"></div>
        </div>

        <!-- load JS files -->
        <script src="static/js/jquery-1.11.3.min.js"></script>         <!-- jQuery (https://jquery.com/download/) -->
        <script src="static/js/tether.min.js"></script>                <!-- http://tether.io/ -->
        <script src="static/js/isInViewport.min.js"></script>          <!-- isInViewport js (https://github.com/zeusdeux/isInViewport) -->
        <script src="static/js/bootstrap.min.js"></script>             <!-- Bootstrap js (v4-alpha.getbootstrap.com/) -->
        <script src="static/js/hero-slider-main.js"></script>          <!-- Hero slider (https://codyhouse.co/gem/hero-slider/) -->
        <script src="static/js/jquery.magnific-popup.min.js"></script> <!-- Magnific popup (http://dimsemenov.com/plugins/magnific-popup/) -->

        <script>

            function adjustHeightOfPage(pageNo) {

                var offset = 80;
                var pageContentHeight = $(".cd-hero-slider li:nth-of-type(" + pageNo + ") .js-tm-page-content").height();

                if($(window).width() >= 992) { offset = 120; }
                else if($(window).width() < 480) { offset = 40; }

                // Get the page height
                var totalPageHeight = 335 + $('.cd-slider-nav').height()
                                        + pageContentHeight + offset
                                        + $('.tm-footer').height();

                // Adjust layout based on page height and window height
                if(totalPageHeight > $(window).height())
                {
                    $('.cd-hero-slider').addClass('small-screen');
                    $('.cd-hero-slider li:nth-of-type(' + pageNo + ')').css("min-height", totalPageHeight + "px");
                }
                else
                {
                    $('.cd-hero-slider').removeClass('small-screen');
                    $('.cd-hero-slider li:nth-of-type(' + pageNo + ')').css("min-height", "100%");
                }
            }

            function uploadVideo() {

                var videoWrapper = $('.cd-bg-video-wrapper');
                if( videoWrapper.is(':visible') ) {
                    // if visible - we are not on a mobile device
                    var videoUrl = videoWrapper.data('video'),

                    video = $('<video autoplay loop><source src="'+videoUrl+'.mp4" type="video/mp4" /></video>');
                    video.appendTo(videoWrapper);

                    // play video if first slide
                    if(videoWrapper.parent('.cd-bg-video.selected').length > 0) video.get(0).play();
                }
            }

            // Everything is loaded including images.
            $(window).load(function(){

                adjustHeightOfPage(1); // Adjust page height

                // Background Video
                if($( window ).width() > 800) {
                    uploadVideo();
                }

                /* Gallery One pop up
                -----------------------------------------*/
                $('.gallery-first').magnificPopup({
                    delegate: 'a', // child items selector, by clicking on it popup will open
                    type: 'image',
                    gallery:{enabled:true}
                });

                /* Gallery Two pop up
                -----------------------------------------*/
                $('.gallery-second').magnificPopup({
                    delegate: 'a', // child items selector, by clicking on it popup will open
                    type: 'image',
                    gallery:{enabled:true}
                });

                /* Collapse menu after click
                -----------------------------------------*/
                $('#tmNavbar a').click(function(){
                    $('#tmNavbar').collapse('hide');

                    adjustHeightOfPage($(this).data("no")); // Adjust page height
                });

                /* Browser resized
                -----------------------------------------*/
                $( window ).resize(function() {
                    var currentPageNo = $(".cd-hero-slider li.selected .js-tm-page-content").data("page-no");

                    // wait 3 seconds
                    setTimeout(function() {
                        adjustHeightOfPage( currentPageNo );
                    }, 3000);

                    if($( window ).width() > 800) {
                       uploadVideo();
                    }

                });

                // Play video only when visible
                // https://stackoverflow.com/questions/21163756/html5-and-javascript-to-play-videos-only-when-visible
                $('video').each(function(){
                    if ($(this).is(":in-viewport")) {
                        $(this)[0].play();
                    } else {
                        $(this)[0].pause();
                    }
                })

                // Remove preloader (https://ihatetomatoes.net/create-custom-preloading-screen/)
                $('body').addClass('loaded');
                $('.tm-current-year').text(new Date().getFullYear());

            });

        </script>

</body>
</html>
